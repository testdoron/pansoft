<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>IHMS2010</title>
    <link rel="stylesheet" type="text/css" href="lib/extjs/resources/css/ext-all.css" />
    <link rel="stylesheet" type="text/css" href="lib/extjs/pan/panihms.css" />
    <link rel="stylesheet" type="text/css" href="javascripts/modules/modules.css" />

    <script type="text/javascript" src="lib/jQuery/jquery-1.4.1.min.js"></script>
    <script type="text/javascript" src="lib/extjs/adapter/ext/ext-base.js"></script>
    <script type="text/javascript" src="lib/extjs/ext-all.js"></script>
    <script type="text/javascript" src="lib/extjs/pan/panihms.js"></script>
</head>

<body scroll="no">

    <!------------------------------------>
    <!--       数据定义：GeanJs         -->
    <!------------------------------------>
    <script type="text/javascript">
        var GeanJs = {
            version: '2.0.1',
            email: 'nsimple.cn@gmail.com'
        }
    </script>
    
    <!-- GeanJs.GetBrowserHeight, GeanJs.GetBrowserWidth -->
    <script type ="text/javascript">
        //获得浏览器可视界面的高度
        GeanJs.GetBrowserHeight = function() {
            if ($.browser.msie) {
                return document.compatMode == "CSS1Compat" ? document.documentElement.clientHeight : document.body.clientHeight;
            }
            else {
                return self.innerHeight;
            }
        }

        //获得浏览器可视界面的宽度
        GeanJs.GetBrowserWidth = function() {
            if ($.browser.msie) {
                return document.compatMode == "CSS1Compat" ? document.documentElement.clientWidth : document.body.clientWidth;
            }
            else {
                return self.innerWidth;
            }
        }
    </script>



    <!------------------------------------>
    <!--       数据定义：IHMSData       -->
    <!------------------------------------>
    <script type="text/javascript">
        var IHMSData = {
            version: '2010.6.0',
            email: 'lukan.pan@gmail.com'
        }
    </script>
    
    <!-- IHMSData.UITxt -->
    <script type="text/javascript">
        IHMSData.UITxt = {
            "StartMenuWorkerTxt": "登录用户",
            "StartMenuSettingTxt": "系统选项",
            "StartMenuLogoutTxt": "退出系统",
            "Modules": {
                "BusinessGrid": {
                    "Text": "业务量统计与查询"
                }
            }
        }
    </script>
    
    <!-- IHMSData.ConfigJson -->
    <script type="text/javascript">
        IHMSData.ConfigJson = {
            "SoftwareName": "力合智能大厅管理系统2010",
            "SoftwareVersion": "Base1",
            "WorkerName": "马英豪"
        }
    
    </script>
    
    <!-- IHMSData.CompanyGroup -->
    <script type="text/javascript">
        IHMSData.CompanyGroup =
    {
        "id": "201B1B92-AECA-4bc1-B1C1-0FC70B1B826D",
        "name": "平安银行北京分行将台路分行",
        "items": [
        {
            "id": "B8467904-B3DD-480c-8C5F-35C9BF0F328B",
            "name": "平安银行北京分行将台路分行"
        },
        {
            "id": "0D36E698-5177-46aa-ACDD-D7216B5591D0",
            "name": "平安银行北京分行亚运村分行"
        },
        {
            "id": "B40B9DC8-2771-4adf-9A1A-789E7538FC72",
            "name": "平安银行北京分行平安大街分行"
        },
        {
            "id": "201B1B92-AECA-4bc1-B1C1-0FC70B1B826D",
            "name": "平安银行北京分行昌平分行",
            "items": [
                {
                    "id": "201B1B92-AECA-4bc1-B1C1-0FC70B1B826D",
                    "name": "平安银行北京分行昌平南关大街分行"
                },
                {
                    "id": "201B1B92-AECA-4bc1-B1C1-0FC70B1B826D",
                    "name": "平安银行北京分行昌平西关大街分行"
                },
                {
                    "id": "201B1B92-AECA-4bc1-B1C1-0FC70B1B826D",
                    "name": "平安银行北京分行昌平北关大街分行"
                },
                {
                    "id": "201B1B92-AECA-4bc1-B1C1-0FC70B1B826D",
                    "name": "平安银行北京分行昌平东关大街分行"
                }
            ]
        },
        {
            "id": "201B1B92-AECA-4bc1-B1C1-0FC70B1B826D",
            "name": "平安银行北京分行顺义分行",
            "items": [
                {
                    "id": "201B1B92-AECA-4bc1-B1C1-0FC70B1B826D",
                    "name": "平安银行北京分行顺义北海道分行"
                },
                {
                    "id": "201B1B92-AECA-4bc1-B1C1-0FC70B1B826D",
                    "name": "平安银行北京分行顺义芝加哥分行"
                },
                {
                    "id": "201B1B92-AECA-4bc1-B1C1-0FC70B1B826D",
                    "name": "平安银行北京分行顺义危地马拉分行"
                },
                {
                    "id": "201B1B92-AECA-4bc1-B1C1-0FC70B1B826D",
                    "name": "平安银行北京分行顺义纽约分行"
                }
            ]
        }
    ]
    }
    
    </script>

   
    <!------------------------------------>
    <!--   一些公用的组件 UICommon      -->
    <!------------------------------------>
    <script type="text/javascript">
        var UICommon = {
            version: '2010.6.0',
            email: 'lukan.pan@gmail.com'
        }
    </script>

    <!--用户组织的Group树-->
    <script type="text/javascript">
        //定义树的根节点
        UICommon.CompanyGroupTreeRoot = new Ext.tree.TreeNode({
            id: IHMSData.CompanyGroup.id, //根节点id
            text: IHMSData.CompanyGroup.name
        });

        //定义机构的树
        UICommon.CompanyGroupTree = new Ext.tree.TreePanel({
                title: 'companyGroupTree',
                region: 'west',
                split: true,
                width: 300,
                collapsible: true,
                margins: '3 0 3 3',
                cmargins: '3 3 3 3',
                
                useArrows: true,
                autoScroll: true,//自动滚动 
                animate: true,//开启动画效果 
                enableDD: false,//不允许子节点拖动 
                containerScroll: true,
                rootVisible: true//设为false将隐藏根节点，很多情况下，我们选择隐藏根节点增加美观性 
                //loader: treeloader
                });
                
        //设置根节点
        companyGroupTree.setRootNode(UICommon.CompanyGroupTreeRoot);
    </script>
    
    <script type ="text/javascript">
        // tabs for the center
        var tabs = new Ext.TabPanel({
            region: 'center',
            margins: '3 3 3 0',
            activeTab: 0,
            defaults: { autoScroll: true },

            items: [{
                    title: 'Bogus Tab',
                    html: Ext.example.bogusMarkup
                }, {
                    title: 'Another Tab',
                    html: Ext.example.bogusMarkup
                }, {
                    title: 'Closable Tab',
                    html: Ext.example.bogusMarkup,
                    closable: true
                }]
            });

            // Panel for the west
            var nav = new Ext.Panel({
                title: 'Navigation',
                region: 'west',
                split: true,
                width: 200,
                collapsible: true,
                margins: '3 0 3 3',
                cmargins: '3 3 3 3'
            });

    </script>


    <!------------------------------------>
    <!--       模块：IHMSModule         -->
    <!------------------------------------>
    
    <!--载入相应的模块及开始菜单-->
    <script type="text/javascript">
        IHMSModule = new Ext.app.App({
            init: function() {
                Ext.QuickTips.init(); //把 ext:qtip 的值用于显示提示
            },
            getModules: function() {
                return [
                // 以下是模块的载入，在我们的权限中，模块即为资源
                // 所以以下模块的实例需用Jsp根据当前用户的权限来载入相应的实例
                    new IHMSModule.BusinessGrid(),
					];
            },

            // 组装开始菜单
            getStartConfig: function() {
                return {
                    title: IHMSData.UITxt.StartMenuWorkerTxt.concat(' : ').concat(IHMSData.ConfigJson.WorkerName),
                    iconCls: 'user',
                    toolItems: [{
                        text: IHMSData.UITxt.StartMenuSettingTxt,
                        iconCls: 'settings',
                        scope: this
                    }, '-', {
                        text: IHMSData.UITxt.StartMenuLogoutTxt,
                        iconCls: 'logout',
                        scope: this
                    }]
                    };
                }
            });
    </script>

    <!--模块：BusinessGrid(业务量报表)-->
    <script type="text/javascript">
        IHMSModule.BusinessGrid = Ext.extend(Ext.app.Module, {
            id: 'BusinessGrid',
            init: function() {
                this.launcher = {
                    text: IHMSData.UITxt.Modules.BusinessGrid.Text,
                    iconCls: 'icon-BusinessGrid',
                    handler: this.createWindow,
                    scope: this
                }
            },
            createWindow: function() {
                var desktop = this.app.getDesktop();
                var win = desktop.getWindow('BusinessGrid');
                if (!win) {
                    win = desktop.createWindow({
                        id: 'BusinessGrid',
                        title: IHMSData.UITxt.Modules.BusinessGrid.Text,
                        width: GeanJs.GetBrowserWidth() * 0.8,
                        height: GeanJs.GetBrowserHeight() * 0.9,
                        iconCls: 'icon-BusinessGrid',
                        shim: false,
                        animCollapse: false,
                        border: false,
                        constrainHeader: true,
                        plain: true,
                        //layout: 'fix',

                        items: [
                            new Ext.Panel({
                                title: 'Navigation',
                                region: 'west',
                                split: true,
                                width: 200,
                                collapsible: true,
                                margins: '3 0 3 3',
                                cmargins: '3 3 3 3'
                            })
                            ,
                            new Ext.TabPanel
                            ({
                                region: 'center',
                                margins: '3 3 3 0',
                                activeTab: 0,
                                defaults: { autoScroll: true },
                                items: 
                                [{
                                    title: 'Bogus Tab',
                                    html: ''
                                    }, {
                                    title: 'Another Tab',
                                    html: ''
                                    }, {
                                    title: 'Closable Tab',
                                    html: '',
                                    closable: true
                                }]
                            })
                        ]
                    });
                }
                //alert("win show.");
                win.show();
            }
        });
    
    </script>



    <!--桌面部份-->
    <div id="x-desktop">
        <dl id="x-shortcuts">
            <!-- 快捷方式的id按被调用的窗体 + ‘-shortcut’ 组成 -->
            <dt id="BusinessGrid-shortcut"><a href="#">
                <img src="lib/extjs/pan/images/s.gif" />
                <div id="BusinessGrid-txt">
                </div>
            </a></dt>
            <!-- shortcut end -->
        </dl>
    </div>
    <!--开始按钮 任务栏-->
    <div id="ux-taskbar">
        <div id="ux-taskbar-start">
        </div>
        <div id="ux-taskbuttons-panel">
        </div>
        <div class="x-clear">
        </div>
    </div>
    
    
    
    <!--页面载入后的一些操作-->
    <script type="text/javascript">
        $("title").empty();
        //对TITLE节点进行操作，打印用户单位名称及软件与软件版本号
        $("title").append(
            IHMSData.CompanyGroup.name.concat(" - ").
            concat(IHMSData.ConfigJson.SoftwareName).
            concat(" ").
            concat(IHMSData.ConfigJson.SoftwareVersion));
        $("#BusinessGrid-txt").append(IHMSData.UITxt.Modules.BusinessGrid.Text);
    </script>
    
</body>

</html>
