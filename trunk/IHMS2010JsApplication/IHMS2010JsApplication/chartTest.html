
<script>
	/* 功能:根据输入表达式返回日期字符串
	 * 参数:dateFmt:字符串,由以下结构组成    
	 *      yy:长写年,YY:短写年mm:数字月,MM:英文月,dd:日,hh:时,
	 *      mi:分,ss秒,ms:毫秒,we:汉字星期,WE:英文星期.
	 *      isFmtWithZero : 是否用0进行格式化,true or false
	 * 返回:对应日期的中文字符串
	*/
	GeanJs.DataTime.ToString = function(dateFmt,isFmtWithZero){
		dateFmt = (dateFmt == null ? "yy-mm-dd hh:mi:ss" : dateFmt);
		if(typeof(dateFmt) != "string" )
			throw (new Error(-1, 'toString()方法的第一个参数为字符串类型!'));
		isFmtWithZero = !!isFmtWithZero;
		var weekArr=[["日","一","二","三","四","五","六"],["SUN","MON","TUR","WED","THU","FRI","SAT"]];
		var monthArr=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"];
		var str=dateFmt;
		var o = {
			"yy" : this.getFullYear(),
			"YY" : this.getYear(),
			"mm" : this.getMonth()+1,
			"MM" : monthArr[this.getMonth()],
			"dd" : this.getDate(),
			"hh" : this.getHours(),
			"mi" : this.getMinutes(),
			"ss" : this.getSeconds(),
			"we" : "星期" + weekArr[0][this.getDay()],
			"WE" : weekArr[1][this.getDay()]
		}
		for(var i in o){
			str = str.replace(new RegExp(i,"g"),o[i].toString().fmtWithZero(isFmtWithZero));
		}
		str = str.replace(/ms/g,this.getMilliseconds().toString().fmtWithZeroD(isFmtWithZero));
		return str;
	}

	/* 功能 :将一位数字格式化成两位,如: 9 to 09
	 */
	GeanJs.DataTime.FormatWithZero = function(isFmtWithZero){    
		return (isFmtWithZero && /^\d$/.test(this))?"0"+this:this;
	}

	GeanJs.DataTime.fmtWithZeroD = function(isFmtWithZero){    
		return (isFmtWithZero && /^\d{2}$/.test(this))?"00"+this:((isFmtWithZero && /^\d$/.test(this))?"0"+this:this);
	}

	/* 功能 : 返回与某日期相距N天(N个24小时)的日期
	 * 参数 : num number类型 可以为正负整数或者浮点数,默认为1;
	 *        type 0(秒) or 1(天),默认为天
	 * 返回 : 新的Date对象
	 */
	GeanJs.DataTime.DateAfter = function(num,type){
		num = (num == null?1:num);
		if(typeof(num)!="number") throw new Error(-1,"dateAfterDays(num,type)的num参数为数值类型.");
		type = (type==null?1:type);
		var arr = [1000,86400000];
		return new Date(this.valueOf() + num*arr[type]);
	}

	/* 判断是否是闰年,返回true 或者 false
	 */
	GeanJs.DataTime.IsLeapYear = function (){
		var year = this.getFullYear();
		return (0==year%4 && ((year % 100 != 0)||(year % 400 == 0)));
	}

	//返回该月天数
	GeanJs.DataTime.GetDaysOfMonth = function (){
		return (new Date(this.getFullYear(),this.getMonth()+1,0)).getDate();
	}

	//日期比较函数,参数date:为Date类型,如this日期晚于参数:1,相等:0 早于: -1
	GeanJs.DataTime.DateCompare = function(date){
		if(typeof(date) != "object" || !(/Date/.test(date.constructor)))
			 throw new Error(-1,"dateCompare(date)的date参数为Date类型.");
		var d = this.getTime() - date.getTime();
		return d>0?1:(d==0?0:-1);
	}

	/*功能:返回两日期之差
	 *参数:pd   PowerDate对象
	 *    type: 返回类别标识.yy:年,mm:月,ww:周,dd:日,hh:小时,mi:分,ss:秒,ms:毫秒
	 *    intOrFloat :返回整型还是浮点型值 0:整型,不等于0:浮点型
	 *    output : 输出提示,如:时间差为#周!
	 */
	GeanJs.DataTime.CalDateDistance = function (date,type,intOrFloat,output){
		if(typeof(date) != "object" || !(/Date/.test(date.constructor)))
			 throw new Error(-1,"calDateDistance(date,type,intOrFloat)的date参数为Date类型.");
		type = (type==null?'dd':type);
		if(!((new RegExp(type+",","g")).test("yy,mm,ww,dd,hh,mi,ss,ms,")))
			 throw new Error(-1,"calDateDistance(pd,type,intOrFloat,output)的type参数为非法.");
		var iof = (intOrFloat==null?0:intOrFloat);
		var num=0;
		var o = {
			"ww" : 7*86400000,
			"dd" : 86400000,
			"hh" : 3600000,
			"mi" : 60000,
			"ss" : 1000,
			"ms" : 1
		}
		switch(type){
			case "yy": num = this.getFullYear() - date.getFullYear(); break;
			case "mm": num = (this.getFullYear() - date.getFullYear())*12+this.getMonth()-date.getMonth(); break;
			default: 
				var sub = this.valueOf() - date.valueOf();
				if (o[type])
					num = (sub/o[type]).fmtRtnVal(iof);
				break;
		}
		return (output ? output.replace(/#/g," "+num+" ") : num);
	}

	//返回整数或者两位小数的浮点数
	Number.prototype.fmtRtnVal = function (intOrFloat){
		return (intOrFloat == 0 ? Math.floor(this) : parseInt(this*100)/100);
	}

	//根据当前日期所在年和周数返回周日的日期
	GeanJs.DataTime.RtnByWeekNum = function (weekNum){
		if(typeof(weekNum) != "number")
			throw new Error(-1,"RtnByWeekNum(weekNum)的参数是数字类型.");
		var date = new Date(this.getFullYear(),0,1);
		var week = date.getDay();
		week = (week==0?7:week);
		return date.dateAfter(weekNum*7-week,1);
	}

	//根据日期返回该日期所在年的周数
	GeanJs.DataTime.GetWeekNum = function (){
    var dat = new Date(this.getFullYear(),0,1);
    var week = dat.getDay();
    week = (week==0?7:week);
    var days = this.calDateDistance(dat,"dd")+1;
    return ((days + 6 - this.getDay() - 7 + week)/7);
}
</script>






<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		<title>Highcharts Example</title>
		
		
		<!-- 1. Add these JavaScript inclusions in the head of your page -->
		<script type="text/javascript" src="lib/jquery.v1.4.1/jquery-1.4.1.js"></script>
		<script type="text/javascript" src="lib/Highcharts-1.2.5/highcharts.js"></script>

		<!--[if IE]>
			<script type="text/javascript" src="../js/excanvas.compiled.js"></script>
		<![endif]-->
		
		
		<!-- 2. Add the JavaScript to initialize the chart on document ready -->
		<script type="text/javascript">
		var chart;
		$(document).ready(function() {
			chart = new Highcharts.Chart({
				chart: {
					renderTo: 'container',
					defaultSeriesType: 'column',
					margin: [ 50, 50, 100, 80]
				},
				title: {
					text: 'World\'s largest cities per 2008'
				},
				xAxis: {
					categories: [
						'Tokyo', 
						'Jakarta', 
						'New York', 
						'Seoul', 
						'Manila',
						'Mumbai',
						'Sao Paulo',
						'Mexico City',
						'Dehli',
						'Osaka',
						'Cairo',
						'Kolkata',
						'Los Angeles',
						'Shanghai',
						'Moscow',
						'Beijing',
						'Buenos Aires',
						'Guangzhou',
						'Shenzhen',
						'Istanbul'
					],
					labels: {
						rotation: -45,
						align: 'right',
						style: {
							 font: 'normal 13px Verdana, sans-serif'
						}
					}
				},
				yAxis: {
					min: 0,
					title: {
						text: 'Population (millions)'
					}
				},
				legend: {
					enabled: false
				},
				tooltip: {
					formatter: function() {
						return '<b>'+ this.x +'</b><br/>'+
							 'Population in 2008: '+ Highcharts.numberFormat(this.y, 1) +
							 ' millions';
					}
				},
			        series: [{
					name: 'Population',
					data: getdata(),
					dataLabels: {
						enabled: true,
						rotation: -90,
						color: '#FFFFFF',
						align: 'right',
						x: -3,
						y: 10,
						formatter: function() {
							return this.y;
						},
						style: {
							font: 'normal 13px Verdana, sans-serif'
						}
					}			
				}]
			});
			
			function getdata() {
				var datas = new Array();
				for (var i = 0; i < 45; i++) { //һЩʱʾ
					var x = Math.floor(Math.random() * 5500);
					datas.push(x);
					}
					return datas;
				}

		});
		</script>
</head>
	<body>
		
		<!-- 3. Add the container -->

		<div id="container" style="width: 100%; height: 100%; margin: 0 auto"></div>
		
				
	</body>
</html>
